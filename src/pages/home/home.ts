import { Component, ViewChild, AfterViewInit } from '@angular/core';
import { NavController } from 'ionic-angular';

@Component({
  selector: 'page-home',
  templateUrl: 'home.html'
})
export class HomePage implements AfterViewInit {

  @ViewChild('graphBoard') canvasRef;
  ctx: CanvasRenderingContext2D;
  num = 0;

  datos_test = [{'tiempo': 0, 'datos': [87, 83, 80, 77, 74]}, {'tiempo': 63, 'datos': [71, 68, 65]}, {'tiempo': 57, 'datos': [63, 60, 57]}, {'tiempo': 49, 'datos': [55, 53, 51]}, {'tiempo': 50, 'datos': [50, 49]}, {'tiempo': 50, 'datos': [48, 47]}, {'tiempo': 48, 'datos': [46, 45]}, {'tiempo': 47, 'datos': [44, 43, 42]}, {'tiempo': 48, 'datos': [41]}, {'tiempo': 52, 'datos': [40, 40, 39]}, {'tiempo': 50, 'datos': [38, 38, 37]}, {'tiempo': 46, 'datos': []}, {'tiempo': 50, 'datos': []}, {'tiempo': 54, 'datos': [37]}, {'tiempo': 45, 'datos': [37]}, {'tiempo': 53, 'datos': []}, {'tiempo': 46, 'datos': [36]}, {'tiempo': 49, 'datos': [36]}, {'tiempo': 47, 'datos': []}, {'tiempo': 47, 'datos': [35]}, {'tiempo': 47, 'datos': [34]}, {'tiempo': 47, 'datos': []}, {'tiempo': 46, 'datos': []}, {'tiempo': 47, 'datos': [33]}, {'tiempo': 48, 'datos': [32, 32]}, {'tiempo': 49, 'datos': [31, 32, 33]}, {'tiempo': 52, 'datos': [35, 39, 42]}, {'tiempo': 48, 'datos': [45]}, {'tiempo': 49, 'datos': [48, 48, 46]}, {'tiempo': 53, 'datos': [44, 41, 39, 37, 35, 34]}, {'tiempo': 49, 'datos': [33, 32, 32, 32]}, {'tiempo': 52, 'datos': []}, {'tiempo': 48, 'datos': [31, 31, 30]}, {'tiempo': 48, 'datos': [29]}, {'tiempo': 48, 'datos': []}, {'tiempo': 47, 'datos': []}, {'tiempo': 47, 'datos': [28]}, {'tiempo': 48, 'datos': [27]}, {'tiempo': 46, 'datos': []}, {'tiempo': 47, 'datos': [26]}, {'tiempo': 49, 'datos': [25]}, {'tiempo': 47, 'datos': [24]}, {'tiempo': 49, 'datos': []}, {'tiempo': 47, 'datos': [22, 21]}, {'tiempo': 51, 'datos': [20]}, {'tiempo': 49, 'datos': [19]}, {'tiempo': 48, 'datos': []}, {'tiempo': 49, 'datos': [18]}, {'tiempo': 49, 'datos': [17, 16]}, {'tiempo': 50, 'datos': [15, 14]}, {'tiempo': 48, 'datos': []}, {'tiempo': 50, 'datos': [41, 13, 13]}, {'tiempo': 52, 'datos': [13, 13, 13, 14]}, {'tiempo': 52, 'datos': [14, 14, 14]}, {'tiempo': 47, 'datos': [14]}, {'tiempo': 50, 'datos': [15]}, {'tiempo': 48, 'datos': [15]}, {'tiempo': 49, 'datos': [16, 17]}, {'tiempo': 51, 'datos': [29, 28, 27]}, {'tiempo': 51, 'datos': [20, 22, 25]}, {'tiempo': 48, 'datos': [29]}, {'tiempo': 50, 'datos': [33, 38, 43]}, {'tiempo': 50, 'datos': [47, 51, 24, 55, 55, 55]}, {'tiempo': 46, 'datos': []}, {'tiempo': 46, 'datos': []}, {'tiempo': 52, 'datos': [54, 52, 50]}, {'tiempo': 52, 'datos': [49, 47, 46]}, {'tiempo': 51, 'datos': [52]}, {'tiempo': 49, 'datos': [0]}, {'tiempo': 50, 'datos': [45]}, {'tiempo': 56, 'datos': [44, 44, 44]}, {'tiempo': 47, 'datos': []}, {'tiempo': 53, 'datos': [44, 44, 44]}, {'tiempo': 52, 'datos': [43]}, {'tiempo': 55, 'datos': [43, 42, 41, 40, 39, 38]}, {'tiempo': 53, 'datos': [37, 37, 36, 31, 30]}, {'tiempo': 52, 'datos': [29, 28, 27, 27, 26, 26]}, {'tiempo': 52, 'datos': [25, 25, 24, 24, 24, 24]}, {'tiempo': 53, 'datos': [24, 25, 27, 30, 35]}, {'tiempo': 56, 'datos': [44, 48, 51, 52, 52]}, {'tiempo': 53, 'datos': [50, 48, 47, 45, 45, 44]}, {'tiempo': 52, 'datos': [44, 44, 44, 44, 44, 43]}, {'tiempo': 53, 'datos': [43, 42, 41, 40, 39, 38]}, {'tiempo': 52, 'datos': [37, 37, 37, 36, 37]}, {'tiempo': 51, 'datos': [37, 37, 37, 38, 37, 37]}, {'tiempo': 54, 'datos': [36, 35, 34, 33, 32, 31]}, {'tiempo': 50, 'datos': [30, 30, 30]}, {'tiempo': 51, 'datos': [29, 29]}, {'tiempo': 50, 'datos': [29, 28, 28]}, {'tiempo': 49, 'datos': [27, 25]}, {'tiempo': 51, 'datos': [24, 23, 22]}, {'tiempo': 50, 'datos': [21, 20, 20, 21]}, {'tiempo': 50, 'datos': [24, 28, 34]}, {'tiempo': 51, 'datos': [40, 47, 52, 56]}, {'tiempo': 50, 'datos': [57, 57, 56]}, {'tiempo': 50, 'datos': [55, 54]}, {'tiempo': 50, 'datos': [53, 53, 53]}, {'tiempo': 49, 'datos': [53]}, {'tiempo': 49, 'datos': [53]}, {'tiempo': 48, 'datos': [54]}, {'tiempo': 49, 'datos': []}, {'tiempo': 49, 'datos': [54, 53]}, {'tiempo': 50, 'datos': [53, 52]}, {'tiempo': 49, 'datos': [51, 50]}, {'tiempo': 50, 'datos': [48, 47, 45]}, {'tiempo': 51, 'datos': [44, 43, 43]}, {'tiempo': 52, 'datos': [42, 42, 41, 41, 40, 40]}, {'tiempo': 52, 'datos': [39, 38, 38, 37, 36]}, {'tiempo': 51, 'datos': [35, 34, 33]}, {'tiempo': 50, 'datos': [32, 32, 31]}, {'tiempo': 50, 'datos': [31, 30, 30]}, {'tiempo': 51, 'datos': [29, 29, 28]}, {'tiempo': 50, 'datos': [28, 27, 26, 26]}, {'tiempo': 50, 'datos': [25, 24]}, {'tiempo': 50, 'datos': [24, 25, 27]}, {'tiempo': 50, 'datos': [32, 39, 46]}, {'tiempo': 50, 'datos': [53, 58]}, {'tiempo': 50, 'datos': [60, 61, 60]}, {'tiempo': 50, 'datos': [57, 55, 52]}, {'tiempo': 49, 'datos': [51, 50, 49]}, {'tiempo': 50, 'datos': [49, 48]}, {'tiempo': 51, 'datos': [48, 48, 48]}, {'tiempo': 51, 'datos': [47, 45, 44, 42]}, {'tiempo': 50, 'datos': [40, 39, 37]}, {'tiempo': 50, 'datos': [35, 34]}, {'tiempo': 49, 'datos': [33]}, {'tiempo': 49, 'datos': [32, 32]}, {'tiempo': 51, 'datos': [31, 30, 30, 29]}, {'tiempo': 50, 'datos': [28, 27, 26]}, {'tiempo': 50, 'datos': [25, 24]}, {'tiempo': 50, 'datos': [23, 22]}, {'tiempo': 51, 'datos': [21, 21, 20, 20]}, {'tiempo': 52, 'datos': [20, 19, 19]}, {'tiempo': 50, 'datos': [19, 19, 18]}, {'tiempo': 49, 'datos': [18, 18, 17]}, {'tiempo': 51, 'datos': [18, 20, 25]}, {'tiempo': 50, 'datos': [31, 39, 47]}, {'tiempo': 51, 'datos': [54, 59, 61]}, {'tiempo': 50, 'datos': [61, 59]}, {'tiempo': 50, 'datos': [56, 53, 51, 49]}, {'tiempo': 50, 'datos': [48, 48]}, {'tiempo': 49, 'datos': [48, 48]}, {'tiempo': 51, 'datos': [48, 48]}, {'tiempo': 49, 'datos': [48, 48]}, {'tiempo': 50, 'datos': [47, 46]}, {'tiempo': 50, 'datos': [44, 42, 41]}, {'tiempo': 50, 'datos': [39, 38, 37]}, {'tiempo': 50, 'datos': [36, 35, 35]}, {'tiempo': 50, 'datos': [34, 34, 34]}, {'tiempo': 51, 'datos': [33, 34, 34]}, {'tiempo': 49, 'datos': [34]}, {'tiempo': 50, 'datos': [33, 33, 32, 32]}, {'tiempo': 50, 'datos': [31, 30]}, {'tiempo': 49, 'datos': [29, 28]}, {'tiempo': 50, 'datos': [28, 28]}, {'tiempo': 50, 'datos': [27, 27]}, {'tiempo': 51, 'datos': [27, 27]}, {'tiempo': 51, 'datos': [27, 26, 27]}, {'tiempo': 51, 'datos': [28, 32, 38, 46]}, {'tiempo': 50, 'datos': [54, 63]}, {'tiempo': 50, 'datos': [69, 72, 73]}, {'tiempo': 50, 'datos': [71, 69]}, {'tiempo': 50, 'datos': [66, 63, 61]}, {'tiempo': 45, 'datos': [59, 59]}, {'tiempo': 47, 'datos': [58, 58, 58]}, {'tiempo': 50, 'datos': [58, 58]}, {'tiempo': 50, 'datos': [57, 56]}, {'tiempo': 50, 'datos': [54, 53, 51]}, {'tiempo': 46, 'datos': [49, 47]}, {'tiempo': 50, 'datos': [46, 45, 44]}, {'tiempo': 49, 'datos': [43]}, {'tiempo': 49, 'datos': [42]}, {'tiempo': 49, 'datos': [41]}, {'tiempo': 49, 'datos': []}, {'tiempo': 49, 'datos': [40]}, {'tiempo': 49, 'datos': [40]}, {'tiempo': 51, 'datos': [39, 38, 37]}, {'tiempo': 50, 'datos': [35, 34, 33, 31]}, {'tiempo': 51, 'datos': [30, 29]}, {'tiempo': 50, 'datos': [28, 27, 26, 25]}, {'tiempo': 50, 'datos': [24]}, {'tiempo': 50, 'datos': [23, 22, 20]}, {'tiempo': 51, 'datos': [20, 19, 20]}, {'tiempo': 52, 'datos': [23, 29, 37]}, {'tiempo': 52, 'datos': [47, 56, 64, 69, 70]}, {'tiempo': 51, 'datos': [68, 65, 60, 56]}, {'tiempo': 50, 'datos': [52, 50, 49, 49]}, {'tiempo': 51, 'datos': [49, 50, 51]}, {'tiempo': 51, 'datos': [51, 50, 49]}, {'tiempo': 50, 'datos': [47, 45]}, {'tiempo': 50, 'datos': [42, 39, 36]}, {'tiempo': 50, 'datos': [33, 31]}, {'tiempo': 50, 'datos': [30, 29, 28]}, {'tiempo': 50, 'datos': [28, 28, 28]}, {'tiempo': 50, 'datos': [28, 28]}, {'tiempo': 49, 'datos': [28, 27, 27]}, {'tiempo': 50, 'datos': [26, 25]}, {'tiempo': 50, 'datos': [24, 23, 22]}, {'tiempo': 52, 'datos': [20, 19, 19]}, {'tiempo': 50, 'datos': [20]}, {'tiempo': 51, 'datos': [24, 30, 40, 50]}, {'tiempo': 50, 'datos': [60, 67]}, {'tiempo': 50, 'datos': [71, 72]}, {'tiempo': 51, 'datos': [69, 65, 59]}, {'tiempo': 50, 'datos': [55, 51, 48]}, {'tiempo': 51, 'datos': [47]}, {'tiempo': 50, 'datos': [47, 49]}, {'tiempo': 50, 'datos': [51, 54, 57, 59]}, {'tiempo': 51, 'datos': [59, 59]}, {'tiempo': 51, 'datos': [57, 54, 50]}, {'tiempo': 52, 'datos': [45, 40]}, {'tiempo': 50, 'datos': [35, 31, 27]}, {'tiempo': 51, 'datos': [24, 23]}, {'tiempo': 49, 'datos': [22]}, {'tiempo': 50, 'datos': [22, 23, 24]}, {'tiempo': 49, 'datos': [25]}, {'tiempo': 52, 'datos': [25]}, {'tiempo': 50, 'datos': [25]}, {'tiempo': 51, 'datos': [24]}, {'tiempo': 51, 'datos': [23, 21]}, {'tiempo': 53, 'datos': [21, 22, 27, 35]}, {'tiempo': 51, 'datos': [46, 58, 68]}, {'tiempo': 50, 'datos': [76, 78]}, {'tiempo': 50, 'datos': [77, 73, 67]}, {'tiempo': 55, 'datos': [60, 54, 49, 46]}, {'tiempo': 52, 'datos': [44, 44, 45]}, {'tiempo': 52, 'datos': [45, 46, 46, 45, 43]}, {'tiempo': 49, 'datos': [41, 38, 35]}, {'tiempo': 50, 'datos': [32, 29]}, {'tiempo': 49, 'datos': [27, 25]}, {'tiempo': 49, 'datos': [24]}, {'tiempo': 48, 'datos': []}, {'tiempo': 50, 'datos': [24]}, {'tiempo': 64, 'datos': [24]}, {'tiempo': 52, 'datos': [24, 24, 23, 22]}, {'tiempo': 53, 'datos': [21, 20, 18, 17, 16]}, {'tiempo': 50, 'datos': [16, 20, 28, 40]}, {'tiempo': 47, 'datos': [53, 67, 77, 84]}, {'tiempo': 47, 'datos': [85, 83, 78, 72]}, {'tiempo': 49, 'datos': [66]}, {'tiempo': 51, 'datos': [61, 58, 55, 54]}, {'tiempo': 50, 'datos': [53, 53]}, {'tiempo': 49, 'datos': [53, 52]}, {'tiempo': 50, 'datos': [50, 48, 44]}, {'tiempo': 48, 'datos': [40, 36]}, {'tiempo': 51, 'datos': [32, 28, 26]}, {'tiempo': 48, 'datos': [23, 22, 22]}, {'tiempo': 47, 'datos': [21]}, {'tiempo': 49, 'datos': [21, 21, 20]}, {'tiempo': 50, 'datos': [20, 19, 17]}, {'tiempo': 50, 'datos': [16, 14]}, {'tiempo': 49, 'datos': [12, 10]}, {'tiempo': 51, 'datos': [8, 7, 5]}, {'tiempo': 54, 'datos': [5, 6, 10]}, {'tiempo': 51, 'datos': [19, 32]}, {'tiempo': 52, 'datos': [49, 65, 79]}, {'tiempo': 52, 'datos': [88, 91]}, {'tiempo': 50, 'datos': [90, 84, 77]}, {'tiempo': 50, 'datos': [70, 64]}, {'tiempo': 53, 'datos': [59, 56, 54]}, {'tiempo': 51, 'datos': [53, 53]}, {'tiempo': 51, 'datos': [54, 54, 54]}, {'tiempo': 50, 'datos': [53]}, {'tiempo': 48, 'datos': []}, {'tiempo': 51, 'datos': [51, 49]}, {'tiempo': 50, 'datos': [46, 44]}, {'tiempo': 50, 'datos': [41, 38, 36]}, {'tiempo': 51, 'datos': [34, 33, 33, 33]}, {'tiempo': 49, 'datos': [32, 32, 31]}, {'tiempo': 51, 'datos': [29, 27, 25, 23]}, {'tiempo': 50, 'datos': [20, 17, 15]}, {'tiempo': 51, 'datos': [12, 10, 8]}, {'tiempo': 50, 'datos': [6, 5, 5]}, {'tiempo': 49, 'datos': [5, 6]}, {'tiempo': 51, 'datos': [11, 21]}, {'tiempo': 51, 'datos': [36, 53]}, {'tiempo': 51, 'datos': [68, 80, 87]}, {'tiempo': 50, 'datos': [88, 84]}, {'tiempo': 50, 'datos': [78, 72, 66]}, {'tiempo': 50, 'datos': [61, 58]}, {'tiempo': 51, 'datos': [56, 55]}, {'tiempo': 54, 'datos': [55, 54, 52]}, {'tiempo': 50, 'datos': [50, 46]}, {'tiempo': 53, 'datos': [42, 38, 33]}, {'tiempo': 51, 'datos': [29, 26, 22]}, {'tiempo': 51, 'datos': [20, 18, 17]}, {'tiempo': 51, 'datos': [17, 17]}, {'tiempo': 51, 'datos': [17, 17, 18]}, {'tiempo': 50, 'datos': [18, 18, 18]}, {'tiempo': 50, 'datos': [16]}, {'tiempo': 50, 'datos': [15, 12]}, {'tiempo': 54, 'datos': [9, 6, 5, 5]}, {'tiempo': 51, 'datos': []}, {'tiempo': 48, 'datos': [5]}, {'tiempo': 47, 'datos': [5]}, {'tiempo': 53, 'datos': [5, 5]}, {'tiempo': 50, 'datos': []}, {'tiempo': 51, 'datos': [5]}, {'tiempo': 49, 'datos': [5]}, {'tiempo': 47, 'datos': [5]}, {'tiempo': 48, 'datos': [5]}, {'tiempo': 46, 'datos': []}, {'tiempo': 46, 'datos': [5]}, {'tiempo': 47, 'datos': [5]}, {'tiempo': 49, 'datos': [5]}, {'tiempo': 48, 'datos': []}, {'tiempo': 51, 'datos': [5, 6]}, {'tiempo': 63, 'datos': [10]}, {'tiempo': 72, 'datos': [18, 30, 44, 59, 71]}, {'tiempo': 66, 'datos': [79, 82, 80, 75, 69]}, {'tiempo': 49, 'datos': [62, 57, 53, 51, 50, 51]}, {'tiempo': 48, 'datos': [51, 51, 51, 49, 47, 44]}, {'tiempo': 52, 'datos': [40, 37, 33, 30, 27]}, {'tiempo': 50, 'datos': [25, 24, 24, 24, 24, 24]}, {'tiempo': 49, 'datos': [25, 25, 25, 24]}, {'tiempo': 48, 'datos': [23, 22, 21, 19]}, {'tiempo': 53, 'datos': [17, 15, 14]}, {'tiempo': 48, 'datos': [13]}, {'tiempo': 49, 'datos': [12, 11, 10, 9]}, {'tiempo': 49, 'datos': [9, 8, 8]}, {'tiempo': 50, 'datos': [10, 15, 25, 38]}, {'tiempo': 52, 'datos': [53, 66, 77, 82]}, {'tiempo': 47, 'datos': [83]}, {'tiempo': 49, 'datos': [79, 72, 65, 58]}, {'tiempo': 49, 'datos': [53, 49]}, {'tiempo': 50, 'datos': [47, 47, 48]}, {'tiempo': 48, 'datos': [49, 51, 51, 51]}, {'tiempo': 50, 'datos': [49, 46]}, {'tiempo': 49, 'datos': [43, 39]}, {'tiempo': 51, 'datos': [35, 31, 28]}, {'tiempo': 54, 'datos': [27, 26, 25]}, {'tiempo': 50, 'datos': [25, 25]}, {'tiempo': 49, 'datos': [25, 25]}, {'tiempo': 48, 'datos': [25, 24, 22]}, {'tiempo': 48, 'datos': [21, 19]}, {'tiempo': 47, 'datos': [17, 15]}, {'tiempo': 47, 'datos': [13]}, {'tiempo': 47, 'datos': [12, 11, 10]}, {'tiempo': 53, 'datos': [9, 8, 7]}, {'tiempo': 49, 'datos': [6, 5]}, {'tiempo': 48, 'datos': [6, 10, 20]}, {'tiempo': 53, 'datos': [34, 50]}, {'tiempo': 56, 'datos': [67, 80]}, {'tiempo': 48, 'datos': [89, 92]}, {'tiempo': 49, 'datos': [89, 83]}, {'tiempo': 49, 'datos': [76]}, {'tiempo': 60, 'datos': []}, {'tiempo': 58, 'datos': [68, 62, 58]}, {'tiempo': 65, 'datos': [56, 56, 57, 59]}, {'tiempo': 49, 'datos': [60, 60, 60, 57]}, {'tiempo': 49, 'datos': [54, 49, 44]}, {'tiempo': 51, 'datos': [38, 33, 29]}, {'tiempo': 50, 'datos': [25, 22, 20, 20]}, {'tiempo': 47, 'datos': [19, 19]}, {'tiempo': 46, 'datos': [19, 19]}, {'tiempo': 48, 'datos': [18, 17, 16]}, {'tiempo': 47, 'datos': [12, 10]}, {'tiempo': 46, 'datos': [8, 6]}, {'tiempo': 48, 'datos': [5, 5, 5]}, {'tiempo': 53, 'datos': [5, 5, 5]}, {'tiempo': 57, 'datos': [8, 15]}, {'tiempo': 54, 'datos': [26, 41, 56]}, {'tiempo': 52, 'datos': [70, 80]}, {'tiempo': 52, 'datos': [84, 84, 79]}, {'tiempo': 54, 'datos': [72, 64]}, {'tiempo': 48, 'datos': [58, 52, 49]}, {'tiempo': 49, 'datos': [48, 48, 49]}, {'tiempo': 48, 'datos': [51, 52]}, {'tiempo': 48, 'datos': [52, 51, 48]}, {'tiempo': 48, 'datos': [45, 41]}, {'tiempo': 48, 'datos': [37, 33]}, {'tiempo': 52, 'datos': [30, 28, 26]}, {'tiempo': 50, 'datos': [25, 25]}, {'tiempo': 52, 'datos': [24, 24, 24]}, {'tiempo': 53, 'datos': [24, 23, 23]}, {'tiempo': 52, 'datos': [22, 21]}, {'tiempo': 48, 'datos': [20, 18]}, {'tiempo': 48, 'datos': [16, 15, 15]}, {'tiempo': 48, 'datos': [19, 27, 39]}, {'tiempo': 49, 'datos': [53]}, {'tiempo': 48, 'datos': [68, 79, 86]}, {'tiempo': 50, 'datos': [87, 83, 76]}, {'tiempo': 51, 'datos': [68, 60]}, {'tiempo': 53, 'datos': [53, 48]}, {'tiempo': 64, 'datos': [45, 45, 46, 48]}, {'tiempo': 55, 'datos': [49, 50, 49]}, {'tiempo': 50, 'datos': [47]}, {'tiempo': 49, 'datos': [43, 38, 33, 29]}, {'tiempo': 47, 'datos': [24]}, {'tiempo': 49, 'datos': [21, 18, 17]}, {'tiempo': 49, 'datos': [15, 14]}, {'tiempo': 55, 'datos': [13, 12, 11, 9]}, {'tiempo': 63, 'datos': [8, 6, 5]}, {'tiempo': 51, 'datos': [5, 5, 5]}, {'tiempo': 50, 'datos': [5]}, {'tiempo': 47, 'datos': [5, 5, 5]}, {'tiempo': 47, 'datos': [5, 6]}, {'tiempo': 48, 'datos': [12]}, {'tiempo': 48, 'datos': [21, 35, 50, 64]}, {'tiempo': 47, 'datos': [74]}, {'tiempo': 46, 'datos': [80, 79]}, {'tiempo': 47, 'datos': [75]}, {'tiempo': 49, 'datos': [69]}, {'tiempo': 54, 'datos': [61]}, {'tiempo': 63, 'datos': [54]}, {'tiempo': 60, 'datos': [47]}, {'tiempo': 48, 'datos': [40, 34]}, {'tiempo': 55, 'datos': [29, 24]}, {'tiempo': 47, 'datos': [19]}, {'tiempo': 55, 'datos': [14, 9, 5, 5]}, {'tiempo': 59, 'datos': [5, 5, 5, 5]}, {'tiempo': 48, 'datos': [5, 5]}, {'tiempo': 48, 'datos': [5, 5, 5, 5]}, {'tiempo': 48, 'datos': [5, 5]}, {'tiempo': 49, 'datos': [5, 5, 5]}, {'tiempo': 49, 'datos': [5]}, {'tiempo': 53, 'datos': [6, 7, 9]}, {'tiempo': 52, 'datos': [11, 12, 14, 16]}, {'tiempo': 47, 'datos': [18, 20, 22]}, {'tiempo': 51, 'datos': [25, 29, 34]}, {'tiempo': 52, 'datos': [40, 45, 46]}, {'tiempo': 49, 'datos': [44, 46, 60]}, {'tiempo': 48, 'datos': [95, 95, 95]}, {'tiempo': 49, 'datos': [90, 58, 5]}, {'tiempo': 53, 'datos': [0, 0, 0, 0]}, {'tiempo': 50, 'datos': [0, 0, 0, 0]}, {'tiempo': 48, 'datos': [0, 0]}, {'tiempo': 47, 'datos': [0, 0]}, {'tiempo': 49, 'datos': [0, 0, 0]}, {'tiempo': 48, 'datos': [0, 0, 0]}, {'tiempo': 49, 'datos': [0]}, {'tiempo': 54, 'datos': [0, 0, 0, 0]}, {'tiempo': 53, 'datos': [0, 0]}, {'tiempo': 51, 'datos': [0, 0]}, {'tiempo': 52, 'datos': [0, 0, 0, 0]}, {'tiempo': 49, 'datos': [0]}, {'tiempo': 47, 'datos': [0, 0]}, {'tiempo': 47, 'datos': [0]}, {'tiempo': 52, 'datos': [0]}, {'tiempo': 47, 'datos': [0, 0]}, {'tiempo': 48, 'datos': [0, 0]}, {'tiempo': 47, 'datos': [0, 0]}, {'tiempo': 48, 'datos': []}, {'tiempo': 57, 'datos': [0, 0]}, {'tiempo': 55, 'datos': [0, 0, 0]}, {'tiempo': 53, 'datos': [0, 0, 0]}, {'tiempo': 55, 'datos': [0, 0, 0, 0]}, {'tiempo': 58, 'datos': [0, 0, 0, 0, 0, 0]}, {'tiempo': 55, 'datos': [0, 0, 0]}, {'tiempo': 49, 'datos': [0, 0]}, {'tiempo': 53, 'datos': [0, 0, 0]}, {'tiempo': 54, 'datos': [0, 0]}, {'tiempo': 47, 'datos': [0, 0, 0]}, {'tiempo': 47, 'datos': [0]}, {'tiempo': 54, 'datos': [0, 0, 0, 0]}, {'tiempo': 54, 'datos': [0, 0, 0]}, {'tiempo': 51, 'datos': [0, 0]}, {'tiempo': 50, 'datos': [0, 0]}, {'tiempo': 51, 'datos': [0, 0]}, {'tiempo': 53, 'datos': [0, 0, 0, 0]}, {'tiempo': 50, 'datos': [0, 0]}, {'tiempo': 47, 'datos': [0, 0, 0]}, {'tiempo': 48, 'datos': [0]}, {'tiempo': 49, 'datos': [0, 0, 0, 0]}, {'tiempo': 47, 'datos': [0, 0]}, {'tiempo': 50, 'datos': [0, 0]}, {'tiempo': 51, 'datos': [0, 0, 0]}, {'tiempo': 50, 'datos': [0, 0, 0]}, {'tiempo': 49, 'datos': [0]}, {'tiempo': 48, 'datos': [0, 0, 0]}, {'tiempo': 64, 'datos': [0, 0, 0]}, {'tiempo': 49, 'datos': [0, 0, 0]}, {'tiempo': 47, 'datos': [0, 0]}, {'tiempo': 50, 'datos': [0, 0]}, {'tiempo': 49, 'datos': [0, 0]}, {'tiempo': 50, 'datos': [0, 0, 0]}, {'tiempo': 52, 'datos': [0, 0, 0]}, {'tiempo': 50, 'datos': [0, 0, 0]}, {'tiempo': 50, 'datos': [0, 0]}, {'tiempo': 48, 'datos': [0, 0]}, {'tiempo': 50, 'datos': [0, 0, 0]}, {'tiempo': 50, 'datos': [0, 0, 0]}, {'tiempo': 48, 'datos': [0]}, {'tiempo': 47, 'datos': [0, 0, 0]}, {'tiempo': 47, 'datos': [0, 0]}, {'tiempo': 49, 'datos': [0, 0]}, {'tiempo': 47, 'datos': [0, 0, 0, 0]}, {'tiempo': 51, 'datos': [0]}, {'tiempo': 50, 'datos': [0, 0, 0]}, {'tiempo': 50, 'datos': [0, 0, 0]}, {'tiempo': 48, 'datos': [0, 0, 0]}, {'tiempo': 69, 'datos': [0, 0, 0]}, {'tiempo': 49, 'datos': [0, 0]}, {'tiempo': 53, 'datos': [0, 0]}, {'tiempo': 50, 'datos': [0]}, {'tiempo': 52, 'datos': [0, 0]}, {'tiempo': 50, 'datos': []}, {'tiempo': 46, 'datos': [0]}, {'tiempo': 44, 'datos': [0]}, {'tiempo': 44, 'datos': [0, 0]}, {'tiempo': 45, 'datos': [0, 0, 0]}, {'tiempo': 52, 'datos': [0, 0, 0, 0, 0]}, {'tiempo': 46, 'datos': [0, 0, 0, 0]}, {'tiempo': 47, 'datos': [0, 0, 0, 0]}, {'tiempo': 45, 'datos': [0, 0, 0, 0]}, {'tiempo': 44, 'datos': [0]}, {'tiempo': 44, 'datos': [0, 0, 0]}, {'tiempo': 44, 'datos': [0, 0]}, {'tiempo': 44, 'datos': [0, 0, 0]}, {'tiempo': 44, 'datos': [0]}, {'tiempo': 44, 'datos': [0, 0, 0]}];
  reader_position = 0;

  graph_queue = []
  graph_data = [];
  graph_position = 0;
  graph_max_times = 50;
  graph_time_width = 500 / this.graph_max_times;
  graph_min = -128;
  graph_max = 122;

  ngAfterViewInit() {
    this.ctx = this.canvasRef.nativeElement.getContext('2d');
    setInterval(() => { return this.analizarCola(); }, 70);
    this.simularLlegadaData();
  }

  simularLlegadaData() {
    if (this.reader_position >= this.datos_test.length) {
      return;
    }
    var new_buffer_data = this.datos_test[this.reader_position]['datos'];
    this.reader_position++;
    if (this.reader_position < this.datos_test.length) {
      setTimeout (() => {
        this.simularLlegadaData();
      }, this.datos_test[this.reader_position]['tiempo']);
    }
    this.llegaData(new_buffer_data);
  }

  llegaData(datos) {
    var self = this;
    datos.map(function(elem) {
      self.graph_queue.push(elem);
    });
  }
  analizarCola() {
    if (this.graph_queue.length == 0) {
      return;
    }
    var new_data = this.graph_queue.shift();

    this.graph_data[this.graph_position] = new_data;
    var next_pos = (this.graph_position + 1) % this.graph_max_times;
    var prev_pos = this.graph_position - 1;
    if (prev_pos < 0) {
      prev_pos = this.graph_max_times + prev_pos;
    }
    this.ctx.beginPath();
    this.ctx.clearRect(this.graph_time_width * this.graph_position, 0, this.graph_time_width, this.canvasRef.nativeElement.height);
    this.ctx.clearRect( this.graph_time_width * next_pos, 0, this.graph_time_width, this.canvasRef.nativeElement.height);
    this.ctx.moveTo(this.graph_time_width * this.graph_position, (this.graph_data[prev_pos] || 0) + this.graph_max);
    this.ctx.lineTo(this.graph_time_width * (this.graph_position + 1), this.graph_data[this.graph_position] + this.graph_max);
    this.ctx.stroke();

    this.graph_position = (this.graph_position + 1) % this.graph_max_times;
  }

  restart() {
    this.graph_position = 0;
    this.graph_queue = [];
    this.graph_position = 0;
    this.ctx.clearRect(0, 0, this.canvasRef.nativeElement.width, this.canvasRef.nativeElement.height);
  }

}
